##################################################
# TURN SERVER - PRODUCTION CONFIG (AWS/GCP/etc.)
# Use this when deploying on a VM with BOTH:
# - Private IP (inside VPC)
# - Public IP (Elastic IP)
##################################################

###############
# NETWORK SETUP
###############

# Bind to EC2 instance's private IP (example: 10.0.1.5)
# Required so coturn listens on correct NIC.
listening-ip=YOUR_PRIVATE_IP

# Public IP that clients see (Elastic IP recommended)
# MUST map public → private in NATed cloud networks.
# Format: PUBLIC_IP/PRIVATE_IP
external-ip=YOUR_PUBLIC_IP/YOUR_PRIVATE_IP

# TURN + TLS ports
listening-port=3478
tls-listening-port=5349

# Allocate relay ports (open these in AWS Security Group)
min-port=49152
max-port=65535

##################
# AUTHENTICATION
##################

# PRODUCTION: use dynamic secret-based tokens (TURN REST API)
# This is secure and avoids shipping static passwords to users.
use-auth-secret
static-auth-secret=CHANGE_ME_TO_STRONG_SECRET

# If you need static accounts (not recommended for prod):

# lt-cred-mech
# user=nani:pass123

realm=turn.yourdomain.com

##############
# TLS / DTLS
##############

# Use real certificates (Let’s Encrypt, etc.)
cert=/etc/letsencrypt/live/turn.yourdomain.com/fullchain.pem
pkey=/etc/letsencrypt/live/turn.yourdomain.com/privkey.pem

###############
# HARDENING
###############

fingerprint
stale-nonce
no-loopback-peers
no-multicast-peers

# Run as non-root user
proc-user=turnserver
proc-group=turnserver

# Quotas (prevent abuse)
total-quota=1000
user-quota=50
bps-capacity=0

###########
# LOGGING
###########

log-file=/var/log/turnserver/turnserver.log
simple-log
# verbose   # ONLY enable when debugging

